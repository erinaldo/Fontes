#Include "Rwmake.ch"

/*
эээээээээээээээээээээээээээээээээээээээээээээээээээээээээээээээээээээээээээ
╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠
╠╠иммммммммммямммммммммкмммммммяммммммммммммммммммммкммммммямммммммммммм╩╠╠
╠╠╨Programa  ЁFA050GRV ╨ Autor ЁCristiano Figueiroa ╨ Data Ё 29/09/06   ╨╠╠
╠╠лммммммммммьмммммммммймммммммоммммммммммммммммммммйммммммомммммммммммм╧╠╠
╠╠╨Descricao ЁPonto de Entrada Disparado na Confirmacao da Inclusao de  ╨╠╠
╠╠╨          ЁTitulos a Pagar ( Gravacao de Dados Complementares )      ╨╠╠
╠╠лммммммммммьмммммммммммммммммммммммммммммммммммммммммммммммммммммммммм╧╠╠
╠╠╨Uso       Ё Csu CardSystem                                           ╨╠╠
╠╠хммммммммммомммммммммммммммммммммммммммммммммммммммммммммммммммммммммм╪╠╠
╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠
ъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъъ
*/

User Function FA050GRV()

/*здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
  Ё               Declara as Variaveis Utilizadas na Rotina                    Ё
  юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды*/

Local aAreaSE2 := SE2->( GetArea() )
Local aArea    := GetArea()
Local cPrefixo := SE2->E2_PREFIXO
Local cNum     := SE2->E2_NUM
Local cFornece := SE2->E2_FORNECE
Local cLoja    := SE2->E2_LOJA
Local cItem    := SE2->E2_ITEMD
Local cClasse  := SE2->E2_CLVLDB

/*здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
  Ё  Bloco removido do fonte CSUFIN09.prw - onde existia este ponto de enrada  Ё
  юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды*/

If SE2->E2_RATCSU == "S" .And. Posicione( "SED" , 1 , xFilial("SED") + SE2->E2_NATUREZ , "ED_RECDEP" ) == "D"
	// U_CSUFIN09(.F.,3)
EndIf

/*здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
  Ё  Final do Bloco do fonte CSUFIN09.prw - onde existia este ponto de enrada  Ё
  юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды*/

/*здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
  Ё                     Abre a Tabela de Titulos a Pagar                       Ё
  юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды*/

DbSelectArea("SE2")
DbSetOrder(1)

/*здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
  Ё                     Posiciona no  de Titulos a Pagar                       Ё
  юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды*/

If DbSeek ( xFilial("SE2") + cPrefixo + cNum )
 
/*здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
  Ё         Processa todos os Titulos referentes ao Documento de Entrada       Ё
  юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды*/

   Do While SE2->( !Eof() ) .And. SE2->E2_PREFIXO == cPrefixo ;
                             .And. SE2->E2_NUM     == cNum

   /*здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
     Ё                  Atualiza os Dados dos Titulos de Impostos                 Ё
     юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды*/
  
      If SE2->E2_TIPO $ "TX ;INS;ISS"
         Reclock("SE2" , .F. )
         SE2->E2_ITEMD  := cItem 
         SE2->E2_CLVLDB := cClasse 
         MsUnlock()   
      Endif   

   /*здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
     Ё                  Processa o Proximo Registro da Tabela                     Ё
     юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды*/

      DbSkip()
      Loop

   Enddo

Endif

/*здддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддд©
  Ё                        Restaura as Areas Utilizadas                        Ё
  юдддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддддды*/

RestArea(aAreaSE2)
RestArea(aArea)

Return