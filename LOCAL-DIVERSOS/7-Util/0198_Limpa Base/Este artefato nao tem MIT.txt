Pacote 0198
Tags: Protheus Limpeza Base Dados Movimento Entrada Producao Limpa

Conteúdo do artigo no ByYou:
http://fluig.totvs.com/portal/p/10097/articleview/engenhariadeservios-community/1974495


LIMPA BASE

Em 24/09/2014 este artefato sofreu uma melhoria. Além das funcionalidades mencionadas também ZERA o conteúdo dos campos de acumuladores do SA1 e SA2.
Seguem detalhes sobre essa melhoria:
SA1
A1_MSALDO, A1_MCOMPRA, A1_METR, A1_PRICOM, A1_ULTCOM, A1_NROCOM
A1_SALDUP, A1_NROPAG, A1_SALPEDL, A1_ATR, A1_VACUM, A1_SALPED, A1_TITPROT
A1_DTULTIT, A1_CHQDEVO, A1_DTULCHQ, A1_MATR, A1_MAIDUPL, A1_SALDUPM
A1_PAGATR, A1_SALPEDB
SA2
A2_MATR, A2_MCOMPRA, A2_METR, A2_MSALDO, A2_NROCOM, A2_PRICOM, A2_ULTCOM
A2_SALDUPM, A2_SALDUP, A2_MNOTA




Roteiro:
01 - Aplicar o patche ( aqui na Engenharia, Documentos, na pasta LIMPABASE )

02 - Colocar a rotina no Menu ou acionar pelo Fórmulas (User Function 0198_LimpaBase) - na primeira liberação que fiz nomeei este pacote como 0191 - tive que renomear para 0198

03 - Autenticar a ferramenta - detalhes em:  http://fluig.totvs.com/portal/p/10097/articleview/engenhariadeservios-community/1972613
Temos um vídeo dessa explicando os passos para autenticação no link a seguir: http://fluig.totvs.com/portal/p/10097/videos/engenhariadeservios-community/1967792/1967793

04 - Preencher um arquivo padrão Texto com o nome das tabelas (nome completo e uma tabela por linha).

Veja exemplo:
SE1990
SE2990
SE5990
SE3990
SEL990
SEA990
SEF990
SE8990
 
Normalmente colocamos uma lista de tabelas de MOVIMENTO.
Normalmente não colocamos tabelas de CADASTRO.
Mas você pode utilizar a ferramenta para apagar tabelas de cadastro também.
 
Além do patche temos também um arquivo de exemplo entitulado: ArquivoTxtComTabelasMovimento.txt
 
Está disponível juntamente com o patche.
 
05 - Executar a rotina
 
06 - Confirmar o desejo de querer executar a rotina
 
Lembre-se... este artefato APAGA AS TABELAS DA BASE DE DADOS sem executar backup.
É isso mesmo que você quer ?
 
07 - Escolher o arquivo que possui a lista de tabelas - ITEM 04
 
08 - Confirmar a operação
 
 
Detalhes sobre o artefato:
a) O arquivo precisa estar embaixo de Protheus_Data (ROTH PATH)
b) O artefato só funciona para ambiente TOP
c) Ambiente Linux - O arquivo com as tabelas precisa do ENTER padrão windows ( Chr(13) + Chr(10) ) para funcionar
d) A rotina utiliza DELETE FROM como comando SQL e isso significa que os dados e a estrutura das tabelas são apagados
e)Log gerado: "C:\TEMP\Log_Limpeza"

Agradecimentos aos Mario Chagas e Marcelo Vicente colega aqui da DRG SP que é o autor do artefato.